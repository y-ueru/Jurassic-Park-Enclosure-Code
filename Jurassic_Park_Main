/*
Jurassic Park Enclsoure

Team Name: Usagi Fish
Team Members: Claire Huang, Siddharth Ramalingam, Han Xu
Description:

first scene: switch and haptic motor for vibration
second scene: goat head flips and shows death
third scene: dinosaur flips up (jumpscare)
fourth scene: car flips upside down
fifth scene: car lands in tree and LED blinks for the headlight
*/

#include <Servo.h>

Servo goatservo;  // create servo variable

const int motorPin = 2;
const int switch1pin = 3;  // switch for scene 1
int switch1State = 0;
int previousSwitch1State = 0;

const int switch2pin = 10;  // switch for scene 2
int switch2State = 0;
int previousSwitch2State = 0;

void setup() {
  pinMode(switch1pin, INPUT);
  pinMode(motorPin, OUTPUT);  // Set the motor pin as output

  pinMode(switch2pin, INPUT);
  goatservo.attach(A5);  // attaches the servo on pin 9
  Serial.begin(9600);
  Serial.println("Start Testing");
}

void loop() {
  switch1State = digitalRead(switch1pin);  // scene 1
  if (switch1State != previousSwitch1State) {
    if (switch1State == HIGH) {
      Serial.println("switch 1 activated");
      vibrationFunction();
    } else {
      Serial.println("switch 1 released");
    }
  }
  previousSwitch1State = switch1State;

  switch2State = digitalRead(switch2pin);  // scene 2
  if (switch2State != previousSwitch2State) {
    if (switch2State == HIGH) {
      Serial.println("switch 2 activated");
      servoFunction();
    } else {
      Serial.println("switch 2 released");
    }
  }
  previousSwitch2State = switch2State;
}

void vibrationFunction() {       // leaves and foliage rustle
  digitalWrite(motorPin, HIGH);  // Turn motor ON
  Serial.println("On");
  delay(2000);                  // Run for 2s
  digitalWrite(motorPin, LOW);  // Turn motor OFF
  Serial.println("Off");
}

void servoFunction() {  // flips the goats head
  goatservo.write(180);
  delay(500);           // move to 0 degrees (180 degree rotation)
  goatservo.write(90);  // wait for servo to complete movement
}
